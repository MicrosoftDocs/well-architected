---
title: Choose compute and storage
description: Review the design area for compute and storage of the Azure Well-Architected Framework. Learn how to apply these principles to Oracle workloads using the Azure infrastructure as a service (IaaS) model.
author: jessiehaessler
ms.author: jhaessler
ms.date: 04/15/2024
ms.topic: concept-article
ms.service: azure-waf
ms.subservice: waf-workload-oracle

---

# Choose compute and storage

This article describes how to right-size compute and storage for your Oracle workloads by using the Azure infrastructure as a service (IaaS) model.

You can use Azure IaaS to migrate your Oracle workloads from on-premises to the cloud. The complexity, size, and high input/output (I/O) demands of a workload can complicate the migration process and negatively affect Oracle Database performance. Database performance is dependent on parameters such as read/write disk throughput (MBps), read/write IOPS, CPU, RAM, and network latency. As such, choosing the correct combination of compute and storage for Azure IaaS and the location of application workloads relative to database services is crucial for a successful database migration.

## Assess the Oracle workload using AWR or Statspack reports

To get right-sizing recommendations for the required Azure infrastructure, you need to generate either an Automatic Workload Repository (AWR) report or a Statspack report for each database that you plan to migrate to Azure.

An [AWR report](https://docs.oracle.com/en/database/oracle/oracle-database/23/tgdba/download-awr-report.html#GUID-735F06E5-C97A-41B1-8C23-F2FEFDE0CED0) is a detailed performance analysis report generated by Oracle Database. The report contains comprehensive information about database performance, wait events, system resources, and more. An AWR report is included with Oracle Diagnostics Pack for the Oracle Database product set. If you're running Standard Edition or Enterprise edition without a Diagnostics Pack license, use a [Statspack report](https://docs.oracle.com/cd/B10500_01/server.920/a96533/statspac.htm) instead.

Insight into the peak load is essential because a database and servers are used to different capacities. If the peak load occurs on backup timings during the night and backup Recovery Time Objective (RTO) or Recovery Point Objective (RPO) requirements are within four hours, you can repeat the same exercise for an average load.

The peak load window of time is usually one hour. You can determine the peak load by using Oracle Enterprise Manager. If you don't have a license for Oracle Enterprise Manager, you can use the following script for the [top five busiest times](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql). This script is available for both [Standard Edition databases](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_statspack.sql) and [Enterprise Edition databases](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql).

### Recommendations

- Generate comprehensive AWR reports for a database right-sizing exercise.
- Generate the AWR report for the busiest workload period during short windows of time, such as 30 minutes or one hour.
- Generate a peak-load AWR report (and an average-peak-load AWR report, if you want).
- Obtain any other AWR reports that might have important details about the database workload, such as end-of-month or end-of-quarter reporting periods.
- Ensure the report is in HTML for the right-sizing tool.
- Use the following scripts to get the top five busiest times if you aren't sure when peak load occurs:
  - [AWR](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql)
  - [Statspack](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_statspack.sql)

## Use automated tools to right-size your workload

Right-size your workloads by using automated tools to match with the correct Azure Virtual Machines SKU according to vCPU, memory, throughput, and IOPS. Analyze an AWR report or a Statspack report of your Oracle workloads to right-size your Azure infrastructure so that it meets performance requirements. Such analyses are based on expert understanding of database performance and require automated tools to manage all variables, such as the [Oracle Migration Assistant Tool (OMAT)](https://github.com/Azure/Oracle-Workloads-for-Azure/tree/main/omat).

OMAT helps you evaluate your resource usage for on-premises or in the cloud Oracle installations and recommends the optimal virtual machine (VM) and storage to run the same workload on Azure. OMAT collects and processes AWR reports from the source system, extracts the required data, and places it into an Excel workbook. Review the partition of CPU and core processors when you use OMAT to give you the hyper-threaded factor. OMAT uses a factor of two by default, but you can adjust this number to fit your specific usage. Reach out to your local contact person if you need support.

### Recommendations

- Use automated right-sizing tools, such as [OMAT](https://github.com/Azure/Oracle-Workloads-for-Azure/tree/main/omat). Right-sizing tools automate the steps that are outlined in the AWR sizing document to speed up the migration process and simplify the AWR report.
- Contact experts who understand the recommendations generated by the OMAT report.

## Choose the right VM for your workload

It's important to choose the right VM for your workload. Each VM family comes with a selection of sizes that can be matched to your needs. [E-series](/azure/virtual-machines/edv5-edsv5-series) and [M-series](/azure/virtual-machines/m-series) are hyper-threaded VMs that are widely used for database needs. Use E-series VMs for workloads that have high throughput values. Use M-series VMs for workloads that require high memory.

Microsoft also offers [constrained core sizes](/azure/virtual-machines/constrained-vcpu?tabs=family-E) to reduce the cost of software licensing while maintaining the same memory, storage, and I/O bandwidth.

### Recommendations

- Choose a [hyper-threaded VM](https://azure.microsoft.com/pricing/details/virtual-machines/series/) to save on licensing costs.
- Use [Azure Pricing tools](https://azure.microsoft.com/pricing/calculator/) to compare the cost of different Azure VM recommendations.
- Use [Azure Reservations](https://azure.microsoft.com/pricing/reservations) to reduce compute infrastructure costs.

## Choose the right storage solution for your workload

The choice of Azure storage solution for the database depends on the database size, IOPS, and throughput. [Azure Managed Disks](https://azure.microsoft.com/pricing/details/managed-disks/) provides block-level storage volumes managed by Azure and used with Azure VMs. [Azure Storage](/azure/storage/common/storage-introduction) provides a wide range of highly available, massively scalable storage options for apps, data, and VMs in the cloud. The right-sizing assessment helps you decide which storage solution to use for the database.

Other storage considerations are related to archived Oracle redo log files and backups. Archiving redo logs is an ongoing read/write process that involves continual evaluation of solution requirements and availability.

The AWR report gives insight into the throughput and IOPS requirements of your specific workload. It's crucial to know your throughput and IOPS requirements before deployment because Oracle workloads are performance sensitive.

The following table gives an example of a data disk storage layout.

| Disk name  |  Function | Size (GB) |Throughput | IOPS | Disk recommendation  |
|---|---|---|---|---|---|
| oredo  | Online redo logs  | 400  |  150 |  1500 | Choose Premium SSD v2 when available and P20 otherwise |
| oarch  | Archived redo logs  | 7000  | 300  |  1250 | Azure Blob Storage configured in Hot tier |
| odata  | Data files and control files   |  18000 | 1000  | 2500 | Choose Premium SSD v2 when available and 5*P50 (striped to RAID-0) otherwise|

The temporary tablespace can use a lot of throughput and IOPS. If this scenario applies to your workload, choose a VM that has an attached ephemeral disk, such as [Ed-v5](/azure/virtual-machines/edv5-edsv5-series). Put the temporary tablespace on the disk. You can choose other disk types depending on your requirements.

This is only one example of a customer workload. Make sure to review and adjust the requirements of the size of your workload, the IOPS, and throughput accordingly.

If you need to use multiple disks for one or more logical volumes in your disk setup, regardless of the disk technology (Oracle ASM, LVM, or other), make sure that you balance the load across disks for maximum performance.

You can use Premium SSD v2 managed disks wherever they're available. Check availability in accordance with the region, and review [disk configurations](/azure/virtual-machines/workloads/oracle/oracle-design#disk-types-and-configurations) before deployment.

The default configured disk size in ASM is decisive if you use Oracle ASM and Managed Disks. If you configure ASM for a maximum size of 4096 GB, ASM can process only this amount. So even if you provision higher disks, ASM doesn't recognize the space. Plan for disk size accordingly, and decide whether to provision some 4095-GB disks. For more information, see [ASM configuration](https://docs.oracle.com/en/database/oracle/oracle-database/19/ostmg/create-diskgroups.html#GUID-7FB8914B-0995-4DA0-8F37-15B8EEAEEE4D).

### Recommendations

- Use the recommendations generated by the OMAT tool to guide you through your database storage options.
- Understand the Azure [disk types](/azure/virtual-machines/disks-types) and how they fit into your workload requirements.
- Review best practices for [disk types and configurations](/azure/virtual-machines/workloads/oracle/oracle-design#disk-types-and-configurations).
- Visit [Azure NetApp Files for Oracle](/azure/architecture/example-scenario/file-storage/oracle-azure-netapp-files) if you plan to use Azure NetApp Files for Oracle as your storage layer.
- Visit [application volume groups](/azure/azure-netapp-files/performance-oracle-multiple-volumes) if you plan to decouple from an Oracle Exadata.
- Visit [Azure Files (Hot tier)](/azure/storage/files/understand-performance#choosing-a-performance-tier-based-on-usage-patterns) for suitable options for large volumes of Redo Log archives and Azure Premium Managed disks.
- Base the backup option for Oracle workloads on data volume and your technical and nontechnical requirements. For more information, see [Backup strategies for Oracle workloads](/azure/virtual-machines/workloads/oracle/oracle-database-backup-strategies).
- Plan your storage layout to avoid performance problems.

## Size the necessary compute infrastructure for Oracle applications

Oracle applications can typically be moved to Azure using VMs with similar capabilities to VMs used in the on-premises deployment.

Use data points from the [Application and Web tiers](/azure/well-architected/oracle-iaas/overview) to size the necessary compute infrastructure for Oracle applications. The Application tier can be moved to any suitable VM SKU that meets the performance and cost optimization requirements.

For more information about using reference architectures to deploy Oracle applications on Azure IaaS, see [Oracle applications on Azure](/azure/virtual-machines/workloads/oracle/deploy-application-oracle-database-azure).

### Recommendations

Get data points from the Application tier and Web tier. These data points include:

- Number of vCPUs
- Average vCPU usage
- Memory size
- Average memory usage
- App storage size
- App version
- Operating system
- Total IOPS
- Total throughput
- Backup strategy

## Next step

To learn how to protect critical data and applications, see [Business continuity and disaster recovery](optimize-business-continuity-disaster-recovery.md).
